name: SwiftLint & SwiftFormat

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  lint:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
        
    - name: Select Xcode version
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: latest-stable
        
    - name: Install Mint
      run: brew install mint
      
    - name: Bootstrap dependencies
      run: mint bootstrap
      
    - name: Run SwiftLint
      run: mint run swiftlint lint
    
    - name: Run SwiftFormat (check only)
      run: mint run swiftformat . --swiftversion 6.0 --dryrun --verbose
